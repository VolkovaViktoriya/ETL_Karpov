# ETL_Karpov
ETL-пайпоайн на базе Airflow с ежедневной выгрузкой сводок по KPI в различных разрезах в таблицу ClickHouse. 
_______
## Подробное описание задачи:  
Ожидается, что на выходе будет DAG в airflow, который будет считаться каждый день за вчера. 

Подзадачи:  
[x] Параллельно должно обрабатываться две таблицы. В feed_actions для каждого юзера считается число просмотров и лайков контента. 
 В message_actions для каждого юзера надо считать, сколько он получает и отсылает сообщений, скольким людям он пишет, сколько людей пишут ему. 
Каждая выгрузка должна быть в отдельном таске.

[x] Далее надо объединить две таблицы в одну. Для этой таблицы считаем все эти метрики в разрезе по полу, возрасту и ос. Делаем три разных таска на каждый срез.

[x] Финальные данные со всеми метриками записываем в отдельную таблицу в ClickHouse. Каждый день таблица должна дополняться новыми данными. 
Сформированную таблицу необходимо загрузить в схему test.

## Стек технологий и технические характеристики хранения данных:
- Python,  ETL средствами airflow.
- Библиотеки pandas, pandahouse, datetime.
- Загрузка данных с использованием SQL запроса, используя подключение к серверу с БД на Clickhouse, выгрузка в БД с использованием библиотеки requests.


## Оценка решения от преподавателей karpov.courses:
Задача 2:  
10 из 10 баллов. 
